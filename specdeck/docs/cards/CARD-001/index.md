# CARD-001: エクスプローラー画面
ステータス: Approved
担当者: ken-sakura
更新日: 2025-09-01

## 1. 概要
アプリケーション起動時に表示されるメイン画面です。カレントディレクトリのファイルとディレクトリを一覧表示し、ユーザーがファイルを選択したり、ディレクトリを移動したりするためのインターフェースを提供します。

## 2. 機能要件

- [x] カレントディレクトリのファイルとディレクトリを一覧表示する。
- [x] ディレクトリは名前の末尾に / をつけて表示する。
- [x] 一覧はディレクトリを先に、次にファイルをアルファベット順でソートして表示する。
- [x] キー操作でカーソルを上下に移動できる。
- [x] 選択したアイテムがディレクトリの場合、そのディレクトリに移動できる。
- [x] 選択したアイテムが.mdファイルの場合、Markdownプレビュー画面に遷移する。
- [x] 親ディレクトリに移動できる。
- [x] コマンドモードに移行できる。
- [x] 不正な操作やエラーが発生した場合、ステータスバーにメッセージを表示する。

## 3. 主要なUIコンポーネントと動作

|要素ID/名前|種別|動作/イベント|
|:---:|:---:|:----|
|ファイルリスト|リストビュー|j / ↓: カーソルを下に移動。<br>k / ↑: カーソルを上に移動。<br>l / Enter: アイテムを選択。ディレクトリなら移動、.mdファイルならプレビュー画面へ遷移。<br>h / Backspace: 親ディレクトリへ移動。|
|タイトルバー|テキスト|現在のディレクトリの絶対パスを表示する。|
|ステータスバー|テキスト|通常時は基本操作のヘルプテキストを表示。<br>コマンドモード中は入力中のコマンドを表示。<br>エラー発生時はエラーメッセージを赤色で表示。
|コマンドモード入力|テキスト入力|: キーでコマンドモードを開始。<br>実行可能なコマンド (:q, :hp, :cat, :ob) を受け付け、Enterで実行する。<br>Escでコマンドモードを抜ける。

4. 画面遷移

* 遷移元:
  * アプリケーション起動
  * Markdownプレビュー画面 (q キー押下時)
  * コマンド結果プレビュー画面 (q キー押下時)

* 遷移先:
  * Markdownプレビュー画面 (.mdファイル選択時)
  * コマンド結果プレビュー画面 (:hp, :cat コマンド実行時)
  * (外部) Webブラウザ (:ob コマンド実行時)
  * アプリケーション終了 (:q コマンド実行時)

5. 関連資料

* UIデザイン: N/A (CUIのため)
* API仕様書: N/A
